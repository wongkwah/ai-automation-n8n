{
  "name": "ğŸ”¥ n8n Think Agent - é›»å•†é€€æ›è²¨åŠ©ç†",
  "nodes": [
    {
      "parameters": {
        "content": "## LLM - GPT 4.1\n\n",
        "height": 220,
        "width": 210,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -140,
        380
      ],
      "id": "f102c886-1a0d-48d3-b1b7-8f2efadf39f2",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "=ä½ æ˜¯ä¸€ä½æ™ºæ…§é€€æ›è²¨ AI å¯©æ ¸åŠ©ç†ï¼Œè«‹æ ¹æ“šä¸‹åˆ—è³‡è¨Šèˆ‡ thinkg tool å”åŠ©é€²è¡Œé‚è¼¯æ¨ç†ï¼Œä¸¦æ€è€ƒæ˜¯å¦æ‡‰è©²ã€Œè‡ªå‹•é€€è²¨ã€ã€ã€Œè‡ªå‹•æ›è²¨ã€æˆ–ã€Œè½‰äººå·¥å¯©æ ¸ã€\n\n## Think:\n- use thinkg tool for directing complex task to organize things from all tools\n\n## Tool:\n- use n8n MCP client Store Order for order list - è«‹å¾ airtable ä¸­ç²å–ç”¨è¨‚å–®è³‡è¨Šèˆ‡ç”¨æˆ¶é¢¨éšªåˆ†æ•¸\n  Order æ–¹æ³•ï¼š ç”¨æˆ¶è¨‚å–®è³‡è¨Š - filter å¯ä»¥ä½¿ç”¨ user_name å–çš„è¨‚å–®åˆ—è¡¨åœ¨åˆ¤æ–·ç”¢å“\n- use n8n MCP client Store User Risk for userrisk - è«‹å¾ airtable ä¸­ç²å–ç”¨è¨‚å–®è³‡è¨Šèˆ‡ç”¨æˆ¶é¢¨éšªåˆ†æ•¸\n  UserRisk æ–¹æ³•: ç”¨æˆ¶é¢¨éšªåˆ†æ•¸ - filter å¯ä»¥ä½¿ç”¨ user_name\n- use n8n MCP client Email for email me notification mail \n  - use gmail çš„æ ¼å¼\n  - è«‹ä½¿ç”¨ html çš„ gmail èªæ³•å¯„é€\n\n\n## info\nmy email info: qwedsazxc78@gmail.com\n\n## è¼¸å‡ºè¦å‰‡\nåœ°å€ï¼šå°ç£  \næ™‚é–“ï¼šUTC8 - {{ $now }}\nè¼¸å‡ºèªè¨€ï¼šç¹é«”ä¸­æ–‡\n\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        360,
        140
      ],
      "id": "c11a65b6-33e6-4f39-8320-58c954a5dcb9",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        -20,
        140
      ],
      "id": "182b71a1-3d6f-4b40-a823-cf34ba63dddc",
      "name": "When chat message received",
      "webhookId": "1f30c366-46b1-4fe0-b4f5-af5fb85dbbad"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        160,
        460
      ],
      "id": "d30e4834-2f57-496e-b295-79b63912db57",
      "name": "Window Buffer Memory"
    },
    {
      "parameters": {
        "description": "=è«‹ä¾ç…§ä»¥ä¸‹å››å€‹é¢å‘è©•ä¼°ï¼Œé€é …æ€è€ƒä¸¦è¨˜éŒ„ç†ç”±ï¼Œæœ€å¾Œåšå‡ºå»ºè­°è¡Œå‹•ã€‚\n\n---\n\n### ã€è¼¸å…¥è³‡è¨Šã€‘\n- ğŸ“¦ è¨‚å–®è³¼è²·æ—¥æœŸï¼špurchase_date \n  1. æ–¼ order list\n- ğŸ“… é€€è²¨ç”³è«‹æ™‚é–“ï¼š{{ $now }}\n- ğŸ§¾ é€€è²¨ç†ç”±å…§å®¹ï¼š reason \n- ğŸ§‘â€ğŸ’¼ æœƒå“¡ç­‰ç´šï¼šmembership_level \n   1. Gold = å„ªè‰¯æœƒå“¡ / Silver = è³¼è²·éæœƒå“¡ / General = ä¸€èˆ¬æœƒå“¡\n   2. æ–¼ userrisk list\n- âš ï¸ é¢¨éšªåˆ†æ•¸ï¼šrisk_score  æ–¼ userrisk list\n- ğŸ” éå» 90 å¤©é€€è²¨æ¬¡æ•¸ï¼š return_count æ–¼ userrisk list\n- ğŸš« æ˜¯å¦é»‘åå–®ï¼šis_blacklisted æ–¼ userrisk list\n\n---\n\n### ã€è«‹æ€è€ƒä»¥ä¸‹é‚è¼¯åˆ¤æ–·ã€‘\n1. â³ **é€€è²¨æ˜¯å¦åœ¨æœŸé™å…§ï¼ˆ30 å¤©ï¼‰ï¼Ÿ**  \n   - è‹¥è¶…éï¼Œè«‹èªªæ˜å¤©æ•¸èˆ‡é•è¦é»ã€‚\n\n2. ğŸ“„ **é€€æ›è²¨ç†ç”±æ˜¯å¦åˆç†ï¼Ÿ**  \n   åˆç†é—œéµå­—åŒ…å«ï¼šã€Œç ´æã€ã€ã€Œå¯„éŒ¯ã€ã€ã€ŒéŒ¯çš„å‹è™Ÿã€ã€ã€Œç‘•ç–µã€ã€ã€ŒéŒ¯èª¤å•†å“ã€ã€ã€Œå°ºå¯¸ä¸åˆï¼ˆæ›è²¨å°ˆç”¨ï¼‰ã€\n\n3. â— æ˜¯å¦æŸ¥åˆ°è¨‚å–®ï¼Ÿ\n   - æŸ¥åˆ°ï¼šé€²å…¥é€€æ›è²¨é‚è¼¯è©•ä¼°\n   - æŸ¥ä¸åˆ°ï¼šç›´æ¥å›è¦† manual_review + è¨˜éŒ„éŒ¯èª¤è¨Šæ¯ï¼ˆå¦‚è¨‚å–®ä¸å­˜åœ¨ã€æŸ¥è©¢å¤±æ•—ï¼‰\n\n3. ğŸ” **é¢¨éšªè©•ä¼°æ˜¯å¦å®‰å…¨ï¼Ÿ**\n   - åˆ†æ•¸æ˜¯å¦å°æ–¼ 0.8ï¼Ÿ\n   - æ˜¯å¦ç‚ºé»‘åå–®ï¼Ÿ\n   - é€€è²¨æ¬¡æ•¸æ˜¯å¦å°‘æ–¼ 3 æ¬¡ï¼Ÿ\n\n4. âœ… **æ ¹æ“šä¸Šè¿°çµæœï¼Œè«‹æ€è€ƒæœ€çµ‚å‹•ä½œå»ºè­°ï¼š**\n   - `auto_refund`ï¼šåˆç†é€€è²¨ç†ç”±ï¼Œé¢¨éšªä½ï¼Œåœ¨æœŸé™å…§\n   - `auto_exchange`ï¼šåˆç†æ›è²¨éœ€æ±‚ï¼ˆç ´æä½†æƒ³æ›åŒæ¬¾ã€å°ºå¯¸ä¸åˆç­‰ï¼‰ï¼Œé¢¨éšªä½\n   - `manual_review`ï¼šä»»ä½•ä¸€é …ä¸ç¬¦åˆéœ€è½‰äººå·¥\n\n---\n\n### ã€è«‹ç”¨ä»¥ä¸‹æ ¼å¼è¼¸å‡º your thoughtã€‘\n\n1. è¨‚å–®å¤©æ•¸ï¼š X  å¤© â†’ âœ…/âŒ æ˜¯å¦åœ¨æœŸé™å…§\n2. ç†ç”±è©•ä¼°ï¼š æ˜¯ / å¦  â†’  é€€è²¨ / æ›è²¨ / ä¸åˆç† \n3. é¢¨éšªè©•ä¼°ï¼šé¢¨éšªåˆ†æ•¸ score ï¼Œé€€è²¨æ¬¡æ•¸ N ï¼Œé»‘åå–®ï¼š æ˜¯/å¦  â†’ âœ…/âŒ\n4. æœ€çµ‚å»ºè­°ï¼šaction = \"auto_refund\" / \"auto_exchange\" / \"manual_review\"\n\n---\n\nè«‹ä¾æ“šä¸Šè¿°é‚è¼¯æ˜ç¢ºæ€è€ƒä¸¦è¼¸å‡ºåˆ¤æ–·éç¨‹ã€‚"
      },
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1,
      "position": [
        420,
        460
      ],
      "id": "39616afa-c6d7-4df9-aadd-8e6a80deb18b",
      "name": "Think"
    },
    {
      "parameters": {
        "content": "## Thinking\n\n",
        "height": 220,
        "width": 230,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        340,
        380
      ],
      "id": "860ccf64-b825-4b9a-91eb-3b3a57a69ea5",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -40,
        480
      ],
      "id": "61dc3da7-37a2-4c95-b980-0f43ec65fb6c",
      "name": "OpenAI 4.1",
      "credentials": {
        "openAiApi": {
          "id": "vo1Kz0pllXw8z5Cv",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "## API å·¥å…· with n8n MCP\n",
        "height": 220,
        "width": 580,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        600,
        380
      ],
      "id": "5ee3cbe5-a46b-44d8-a1f2-9994b3fd3520",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "sseEndpoint": "=https://n8n-alex.zeabur.app/mcp/email/sse"
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1,
      "position": [
        1040,
        460
      ],
      "id": "20b139f5-a0a6-4c73-a500-3c38b14f2edf",
      "name": "n8n MCP - Email"
    },
    {
      "parameters": {
        "content": "## è¨˜æ†¶\n\n",
        "height": 220,
        "width": 210,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        100,
        380
      ],
      "id": "197f6982-578d-4c8e-af44-c5f9645a59de",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "sseEndpoint": "https://n8n-alex.zeabur.app/mcp/store/sse",
        "include": "selected",
        "includeTools": [
          "Order_Update",
          "Order_Delete",
          "Order_Create",
          "Order_GET",
          "Order_ListAll"
        ]
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1,
      "position": [
        680,
        460
      ],
      "id": "0da2905a-bc7a-4fa9-b2f2-48be277a77c9",
      "name": "n8n MCP - Store Order"
    },
    {
      "parameters": {
        "sseEndpoint": "https://n8n-alex.zeabur.app/mcp/store/sse",
        "include": "selected",
        "includeTools": [
          "UserRisk_Update",
          "UserRisk_Delete",
          "UserRisk_Create",
          "UserRisk_GET",
          "UserRisk_ListAll"
        ]
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1,
      "position": [
        860,
        460
      ],
      "id": "a05b2cfd-e3e3-4c1c-ad62-e62660cb5486",
      "name": "n8n MCP - Store User Risk"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Window Buffer Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Think": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI 4.1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "n8n MCP - Email": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "n8n MCP - Store Order": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "n8n MCP - Store User Risk": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "dc37de1f-fe73-4331-b213-3d1fc6932640",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "98fc6998a4fc974191a50fd1e28f3c93149311bffb0a029723a4889a4111c908"
  },
  "id": "cEcMjqTZup3tsSSi",
  "tags": [
    {
      "createdAt": "2025-01-21T07:13:36.575Z",
      "updatedAt": "2025-01-21T07:13:36.575Z",
      "id": "yM2YsERN8eAqo2ZC",
      "name": "ai-agent"
    },
    {
      "createdAt": "2025-03-17T08:20:06.861Z",
      "updatedAt": "2025-03-17T08:20:06.861Z",
      "id": "pvRmfUcHdkTEgrk9",
      "name": "yt"
    },
    {
      "createdAt": "2025-03-17T08:20:09.856Z",
      "updatedAt": "2025-03-17T08:20:09.856Z",
      "id": "Xk0zSy3b5bn7QLYA",
      "name": "mcp"
    }
  ]
}